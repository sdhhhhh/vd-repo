(function(d,p,y,l,f,n,w,b){"use strict";const{ScrollView:v}=f.General,{FormSection:u,FormRadioRow:_,FormSwitchRow:F,FormIcon:S}=f.Forms;function R(){return w.useProxy(n.storage),React.createElement(v,null,React.createElement(u,{title:"Misc Settings",titleStyleType:"no_border"}),React.createElement(F,{label:"NSFW Warning",subLabel:"Warn when sending an NSFW image in a non NSFW channel.",leading:React.createElement(S,{source:b.getAssetIDByName("ic_warning_24px")}),value:n.storage.nsfwwarn,onValueChange:function(a){return n.storage.nsfwwarn=a}}),React.createElement(u,{title:"Defalt Sort",titleStyleType:"no_border"},Object.entries({Best:"best",Hot:"hot",New:"new",Rising:"rising",Top:"top",Controversial:"controversial"}).map(function(a){let[t,r]=a;return React.createElement(_,{label:t,selected:n.storage.sortdefs===r,onPress:function(){n.storage.sortdefs=r}})})))}const g=l.findByProps("sendMessage","receiveMessage"),A=l.findByProps("getLastSelectedChannelId"),$=l.findByProps("createBotMessage"),N=l.findByProps("BOT_AVATARS");function s(a,t,r){const i=a??A?.getChannelId?.(),o=$.createBotMessage({channelId:i,content:"",embeds:r});o.author.username="Astolfo",o.author.avatar="Astolfo",N.BOT_AVATARS.Astolfo="https://i.pinimg.com/736x/50/77/1f/50771f45b1c015cfbb8b0853ba7b8521.jpg",typeof t=="string"?o.content=t:Object.assign(o,t),g.receiveMessage(i,o)}let h=[];h.push(p.registerCommand({name:"femboy",displayName:"femboy",description:"Get an image of a femboy",displayDescription:"Get an image of a femboy",options:[{name:"nsfw",displayName:"nsfw",description:"Get the result from r/femboys instead of r/femboy (NSFW)",displayDescription:"Get the result from r/femboys instead of r/femboy (NSFW)",required:!1,type:5},{name:"sort",displayName:"sort",description:"Changes the way reddit sorts.",displayDescription:"Changes the way reddit sorts",required:!1,type:3},{name:"silent",displayName:"silent",description:"Makes it so only you can see the message.",displayDescription:"Makes it so only you can see the message.",required:!1,type:5}],applicationId:"-1",inputType:1,type:1,execute:async function(a,t){try{let r=a.find(function(e){return e.name==="nsfw"})?.value,i=a.find(function(e){return e.name==="sort"})?.value,o=a.find(function(e){return e.name==="silent"})?.value;if(s(t.channel.id,n.storage.ihateredditwarning,[]),n.storage.ihateredditwarning){if(typeof i>"u"&&(i=n.storage.sortdefs),!["best","hot","new","rising","top","controversial"].includes(i)){s(t.channel.id,"Incorrect sorting type. Valid options are\n`best`, `hot`, `new`, `rising`, `top`, `controversial`.",[]);return}let e=await fetch(`https://www.reddit.com/r/femboy/${i}.json?limit=100`).then(function(c){return c.json()});if(!t.channel.nsfw_&&r&&n.storage.nsfwwarn&&!(o??!0)){s(t.channel.id,`This channel is not marked as NSFW
(You can disable this check in plugin settings)`,[]);return}r&&(e=await fetch(`https://www.reddit.com/r/femboys/${i}.json?limit=100`).then(function(c){return c.json()})),e=e.data?.children?.[Math.floor(Math.random()*e.data?.children?.length)]?.data;let m=await fetch(`https://www.reddit.com/u/${e?.author}/about.json`).then(function(c){return c.json()});o??!0?s(t.channel.id,"",[{type:"rich",title:e?.title,url:`https://reddit.com${e?.permalink}`,author:{name:`u/${e?.author} \u2022 r/${e?.subreddit}`,proxy_icon_url:m?.data.icon_img.split("?")[0],icon_url:m?.data.icon_img.split("?")[0]},image:{proxy_url:e?.url_overridden_by_dest.replace(/.gifv$/g,".gif")??e?.url.replace(/.gifv$/g,".gif"),url:e?.url_overridden_by_dest?.replace(/.gifv$/g,".gif")??e?.url?.replace(/.gifv$/g,".gif"),width:e?.preview?.images?.[0]?.source?.width,height:e?.preview?.images?.[0]?.source?.height},color:"0xf4b8e4"}]):g.sendMessage(t.channel.id,{content:e?.url_overridden_by_dest??e?.url})}else n.storage.ihateredditwarning=!0,s(t.channel.id,"",[{type:"rich",title:"the saddest moment ever :(",description:"reddit api changes this plugin might not work anymore after the api changes take place, thanks for using this joke plugin",footer:{text:"this warning only happens once, you wont see this again."},color:"0xf4b8e4"}])}catch(r){y.logger.log(r),s(t.channel.id,"ERROR !!!!!!!!!!!! \u{1F62D}\u{1F62D}\u{1F62D} Check debug logs!! \u{1F97A}\u{1F97A}\u{1F97A}",[])}}}));const M=R,j=function(){n.storage.nsfwwarn??=!0,n.storage.sortdefs??="new",n.storage.ihateredditwarning??=!1},k=function(){for(const a of h)a()};return d.onLoad=j,d.onUnload=k,d.settings=M,d})({},vendetta.commands,vendetta,vendetta.metro,vendetta.ui.components,vendetta.plugin,vendetta.storage,vendetta.ui.assets);
